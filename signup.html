<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sign Up - Flameoff</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
<div class="container">
  <h2>Sign Up</h2>
  <form id="signupForm">
    <input type="text" id="username" placeholder="Username" required>
    <input type="email" id="email" placeholder="Email" required>
    <input type="password" id="password" placeholder="Password" required>
    <input type="text" id="adminCode" placeholder="Admin Code (for Maker)">
    <button type="submit">Sign Up</button>
  </form>
</div>

<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js"></script>
<script src="js/app.js"></script>
<script>
document.getElementById('signupForm').addEventListener('submit', e => {
  e.preventDefault();
  const username = document.getElementById('username').value;
  const email = document.getElementById('email').value;
  const password = document.getElementById('password').value;
  const adminCode = document.getElementById('adminCode').value;

  auth.createUserWithEmailAndPassword(email, password)
    .then(userCredential => {
      const user = userCredential.user;
      const isMaker = adminCode === "flamonade"; // Only you
      db.collection('users').doc(user.uid).set({
        username,
        role: isMaker ? 'admin' : 'member',
        isMaker
      }).then(() => {
        alert("Signed up as " + (isMaker ? "Maker ðŸ‘‘" : "Member"));
        window.location = "workspace.html";
      });
    })
    .catch(err => alert(err.message));
});
</script>
</body>
</html>

